@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

<#Event> rml:logicalSource [ rml:iterator "$.[*].fields" ;
            rml:referenceFormulation ql:JSONPath ;
            rml:source "evenements-publics-cibul@public" ] ;
    rr:predicateObjectMap [ rr:objectMap [ rml:reference "$.title" ] ;
            rr:predicate rdfs:label ],
        [ rr:objectMap [ rml:reference "$.free_text" ] ;
                rr:predicate rdfs:comment ],
        [ rr:objectMap [ rml:reference "$.description" ] ;
                rr:predicate rdfs:comment ],
        [ rr:objectMap [ rml:reference "$.descriptif" ] ;
                rr:predicate rdfs:comment ],
        [ rr:objectMap [ rml:reference "$.space_time_info" ] ;
                rr:predicate rdfs:comment ],
        [ rr:objectMap [ rml:reference "$.timetable" ] ;
                rr:predicate <http://www.w3.org/2006/time#Interval> ],
        [ rr:objectMap [ rml:reference "$.pricing_info" ] ;
                rr:predicate <http://dbpedia.org/ontology/price> ],
        [ rr:objectMap [ rml:reference "$.lang" ] ;
                rr:predicate <http://purl.org/dc/terms/language> ],
        [ rr:objectMap [ rml:reference "$.updated_at" ] ;
                rr:predicate <http://dbpedia.org/ontology/dateLastUpdated> ],
        [ rr:objectMap [ rml:reference "$.image" ] ;
                rr:predicate <http://dbpedia.org/ontology/picture> ],
        [ rr:objectMap [ rr:parentTriplesMap <#Place>] ;
            rr:predicate <http://linkedevents.org/ontology/atPlace> ],
        [ rr:objectMap [ rml:reference "$.date_end" ;
                    rr:datatype xsd:date ] ;
            rr:predicate <http://dbpedia.org/ontology/endDate> ],
        [ rr:objectMap [ rml:reference "$.date_start" ;
                    rr:datatype xsd:date ] ;
            rr:predicate <http://dbpedia.org/ontology/startDate> ];
    rr:subjectMap [ rr:class <http://schema.org/Event> ;
            rr:template "https://data.opendatasoft.com/ld/resources/evenements-publics-cibul@public/Event/{uid}" ] .

<#Place> rml:logicalSource [ rml:iterator "$.[*].fields" ;
            rml:referenceFormulation ql:JSONPath ;
            rml:source "evenements-publics-cibul@public" ] ;
    rr:predicateObjectMap [ rr:objectMap [ rml:reference "$.placename" ] ;
            rr:predicate rdfs:label ] ,
        [ rr:objectMap [ rml:reference "$.address" ] ;
            rr:predicate <http://rdfs.co/juso/Address> ],
        [ rr:objectMap [ rml:reference "$.city_district" ] ;
            rr:predicate <http://dbpedia.org/ontology/district> ],
        [ rr:objectMap [ rml:reference "$.space_time_info" ] ;
                rr:predicate rdfs:comment ],
        [ rr:objectMap [ rml:reference "$.latlon" ] ;
            rr:predicate <http://www.w3.org/2003/01/geo/wgs84_pos#lat_long> ],
        [ rr:objectMap [ rr:parentTriplesMap <#City> ] ;
            rr:predicate <http://dbpedia.org/ontology/city> ],
        [ rr:objectMap [ rr:parentTriplesMap <#AdministrativeRegion-region> ] ;
            rr:predicate <http://dbpedia.org/ontology/region> ],
        [ rr:objectMap [ rr:parentTriplesMap <#Settlement-nom_dept> ] ;
            rr:predicate <http://dbpedia.org/ontology/department> ];
    rr:subjectMap [ rr:class <http://schema.org/Place> ;
            rr:template "https://data.opendatasoft.com/ld/resources/evenements-publics-cibul@public/Place/{placename}" ] .

<#City> rml:logicalSource [ rml:iterator "$.[*].fields" ;
                      rml:referenceFormulation ql:JSONPath ;
                      rml:source "evenements-publics-cibul@public" ] ;
              rr:predicateObjectMap [ rr:objectMap [ rml:reference "$.city" ] ;
                      rr:predicate rdfs:label ] ;
              rr:subjectMap [ rr:class <http://purl.org/ontology/places#City> ;
                      rr:class <http://schema.org/Place> ;
                      rr:template "https://data.opendatasoft.com/ld/resources/evenements-publics-cibul@public/City/{city}" ] .

<#AdministrativeRegion-region> rml:logicalSource [ rml:iterator "$.[*].fields" ;
            rml:referenceFormulation ql:JSONPath ;
            rml:source "evenements-publics-cibul@public" ] ;
    rr:predicateObjectMap [ rr:objectMap [ rml:reference "$.region" ] ;
            rr:predicate rdfs:label ] ;
    rr:subjectMap [ rr:class <http://dbpedia.org/ontology/AdministrativeRegion> ;
            rr:class <http://schema.org/Place> ;
            rr:template "https://data.opendatasoft.com/ld/resources/evenements-publics-cibul@public/AdministrativeRegion/{region}" ] .

<#Settlement-nom_dept> rml:logicalSource [ rml:iterator "$.[*].fields" ;
            rml:referenceFormulation ql:JSONPath ;
            rml:source "evenements-publics-cibul@public" ] ;
    rr:predicateObjectMap [ rr:objectMap [ rml:reference "$.department" ] ;
            rr:predicate rdfs:label ] ;
    rr:subjectMap [ rr:class <http://dbpedia.org/ontology/Department> ;
            rr:class <http://schema.org/Place> ;
            rr:template "https://data.opendatasoft.com/ld/resources/evenements-publics-cibul@public/Department/{department}" ] .
